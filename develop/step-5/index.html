<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta name="generator" content="Hugo 0.53" />
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> Publishing Releases </title>

  
  
  
  
  
  

  

  <meta name="author" content="PatternFly Elements">


  <meta property="og:title" content="Publishing Releases" />
<meta property="og:description" content="Release Tag, Docs, &amp; Storybook Updates I. Get the latest from master locally, clean up  git status  Check where you are  git checkout master &amp;&amp; git fetch origin &amp;&amp; git pull origin  Grab master from origin  npm run clean  Wipes node_modules directory and deletes any components not in master what this does: rm -rf node_modules package-lock.json rm -rf node_modules  git reset --hard &amp;&amp; git clean -df  Remove any non-committed files, crufty directories  npm install  Installs all dependencies fresh  git checkout -b temp  Create temp branch   III." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.patternfly.org/patternfly-elements/develop/step-5/" />

  




  
  
  
  

  <link rel="canonical" href="https://www.patternfly.org/patternfly-elements/develop/step-5/">  

  <link rel="icon" href="https://www.patternfly.org/patternfly-elements/img/favicons/favicon.png" type="image/png">
<link rel="shortcut icon" href="https://www.patternfly.org/patternfly-elements/img/favicons/favicon.png">


  <link href="https://www.patternfly.org/patternfly-elements/css/font.css" rel="stylesheet" type="text/css">
  <link href="https://www.patternfly.org/patternfly-elements/css/kube.min.css" rel="stylesheet" type="text/css">
  <link href="https://www.patternfly.org/patternfly-elements/css/kube.legenda.css" rel="stylesheet" type="text/css">
  <link href="https://www.patternfly.org/patternfly-elements/css/highlight.css" rel="stylesheet" type="text/css">
  <link href="https://www.patternfly.org/patternfly-elements/css/master.css" rel="stylesheet" type="text/css">
  <link href="https://www.patternfly.org/patternfly-elements/css/kube.demo.css" rel="stylesheet" type="text/css">

  
  
  <link rel="stylesheet" href="https://www.patternfly.org/patternfly-elements/src/sass/kube.min.aa04947625c64fd050c88d1964d38109bb34a6aa0706f9018c55536d9dfe13fe.css">



  <script src="https://www.patternfly.org/patternfly-elements/js/jquery-2.1.4.min.js" type="text/javascript">
  </script>

  <script type="text/javascript" src="https://www.patternfly.org/patternfly-elements/js/tocbot.min.js"></script>
</head>


<body class="page-kube">
  <header> 
<div class="show-sm" id="top-sm">
  <div id="nav-toggle-box">
    <div id="nav-toggle-brand">
      <section id="top-brand-sm">
        <a href="https://www.patternfly.org/patternfly-elements/" title="home"><span>PatternFly</span>Elements</a>
      </section>
    </div>
    <a data-component="offcanvas" data-target="#mobile-toc" href="#" id="nav-toggle"><i class="kube-menu"></i></a>
  </div>
</div>
<div class="hide-sm" id="top">
  <section id="top-brand">
    <a href="https://www.patternfly.org/patternfly-elements/" title="home"><span>PatternFly</span>Elements</a>
  </section>
  <nav id="top-nav-main">
    <ul>
      
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/getting-started/" >Getting Started</a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/develop/" >Develop</a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/theme/" >Theme</a>
        </li>
      
    </ul>
  </nav>
  <nav id="top-nav-extra">
    <ul>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/site-info/community">Community</a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/site-info/get-help">Help</a>
        </li>
      
    </ul>
  </nav>
</div>


<nav id="mobile-toc" class="hide">
  <section class="inner-toc">
    <span class="label big" style="margin-bottom: 1.5rem;">Version 1.0.0-prerelease.34</span>

    <h3><a href="https://www.patternfly.org/patternfly-elements/getting-started">Getting Started</a></h3>
    <ul>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/getting-started/component-status/" title="What&#39;s available?">
            What&#39;s available?
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/getting-started/browser-support/" title="Browser Support">
            Browser Support
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/getting-started/framework-support/" title="Framework Support">
            Framework Support
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/develop/templates/" title="Templates &amp; slots">
            Templates &amp; slots
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/getting-started/polyfills/" title="Polyfills">
            Polyfills
          </a>
        </li>
      
    </ul>
    <h3><a href="https://www.patternfly.org/patternfly-elements/develop">Develop</a></h3>
    <ul>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/develop/step-1a/" title="Setup">
            Setup
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/develop/step-1b/" title="Create a PatternFly Element">
            Create a PatternFly Element
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/develop/javascript/" title="JavaScript">
            JavaScript
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/develop/step-2a/" title="Develop a Structure">
            Develop a Structure
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/develop/step-2b/" title="Write your HTML">
            Write your HTML
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/develop/step-2c/" title="Write your CSS (or Sass)">
            Write your CSS (or Sass)
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/develop/step-2d/" title="Integrate your JavaScript">
            Integrate your JavaScript
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/develop/step-3/" title="Write tests">
            Write tests
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/develop/step-4/" title="Pull requests">
            Pull requests
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/develop/step-5/" title="Publishing Releases">
            Publishing Releases
          </a>
        </li>
      
    </ul>
    <h3><a href="https://www.patternfly.org/patternfly-elements/theme">Theme</a></h3>
    <ul>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/theme/pfe-color-palette/" title="Color palette">
            Color palette
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/theme/pfe-layouts/" title="Layouts">
            Layouts
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/theme/pfe-theme-slots/" title="Theming Slots">
            Theming Slots
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/theme/pfe_dynamic_templates/" title="Dynamic HTML Templates">
            Dynamic HTML Templates
          </a>
        </li>
      
    </ul>

    <h3>Site Info</h3>
    <ul>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/site-info/code-of-conduct/" title="Code of conduct">
            Code of conduct
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/site-info/community/" title="Join the Community">
            Join the Community
          </a>
        </li>
      
        <li>
          <a href="https://www.patternfly.org/patternfly-elements/site-info/get-help/" title="Get Help">
            Get Help
          </a>
        </li>
      
    </ul>

    
    
  </section>
</nav>
 </header>
  <main>

<article style="display: flex; flex-direction: row;">

  
  <nav id="main-toc">
    <section class="inner-toc">
      <span class="label big" style="margin-bottom: 1.5rem;">Version 1.0.0-prerelease.34</span>

      <h3><a href="https://www.patternfly.org/patternfly-elements/getting-started">Getting Started</a></h3>
      <ul>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/getting-started/component-status/" title="What&#39;s available?">
              What&#39;s available?
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/getting-started/browser-support/" title="Browser Support">
              Browser Support
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/getting-started/framework-support/" title="Framework Support">
              Framework Support
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/develop/templates/" title="Templates &amp; slots">
              Templates &amp; slots
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/getting-started/polyfills/" title="Polyfills">
              Polyfills
            </a>
          </li>
        
      </ul>
      <h3><a href="https://www.patternfly.org/patternfly-elements/develop">Develop</a></h3>
      <ul>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/develop/step-1a/" title="Setup">
              Setup
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/develop/step-1b/" title="Create a PatternFly Element">
              Create a PatternFly Element
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/develop/javascript/" title="JavaScript">
              JavaScript
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/develop/step-2a/" title="Develop a Structure">
              Develop a Structure
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/develop/step-2b/" title="Write your HTML">
              Write your HTML
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/develop/step-2c/" title="Write your CSS (or Sass)">
              Write your CSS (or Sass)
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/develop/step-2d/" title="Integrate your JavaScript">
              Integrate your JavaScript
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/develop/step-3/" title="Write tests">
              Write tests
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/develop/step-4/" title="Pull requests">
              Pull requests
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/develop/step-5/" title="Publishing Releases">
              Publishing Releases
            </a>
          </li>
        
      </ul>
      <h3><a href="https://www.patternfly.org/patternfly-elements/theme">Theme</a></h3>
      <ul>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/theme/pfe-color-palette/" title="Color palette">
              Color palette
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/theme/pfe-layouts/" title="Layouts">
              Layouts
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/theme/pfe-theme-slots/" title="Theming Slots">
              Theming Slots
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/theme/pfe_dynamic_templates/" title="Dynamic HTML Templates">
              Dynamic HTML Templates
            </a>
          </li>
        
      </ul>

      <h3>Site Info</h3>
      <ul>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/site-info/code-of-conduct/" title="Code of conduct">
              Code of conduct
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/site-info/community/" title="Join the Community">
              Join the Community
            </a>
          </li>
        
          <li>
            <a href="https://www.patternfly.org/patternfly-elements/site-info/get-help/" title="Get Help">
              Get Help
            </a>
          </li>
        
      </ul>

      
      
    </section>
  </nav>

  <section id="content" style="">
    <header class="page-header">
      <h1> Publishing Releases</h1>
      <p></p>
    </header>

    <ul id="posts">

     

<h2 id="release-tag-docs-storybook-updates">Release Tag, Docs, &amp; Storybook Updates</h2>

<h3 id="i-get-the-latest-from-master-locally-clean-up">I. Get the latest from master locally, clean up</h3>

<ol>
<li><code>git status</code>

<ol>
<li>Check where you are</li>
</ol></li>
<li><code>git checkout master &amp;&amp; git fetch origin &amp;&amp; git pull origin</code>

<ol>
<li>Grab master from origin</li>
</ol></li>
<li><code>npm run clean</code>

<ol>
<li>Wipes node_modules directory and deletes any components not in master</li>
<li>what this does:</li>
<li>rm -rf node_modules package-lock.json</li>
<li>rm -rf node_modules</li>
</ol></li>
<li><code>git reset --hard &amp;&amp; git clean -df</code>

<ol>
<li>Remove any non-committed files, crufty directories</li>
</ol></li>
<li><code>npm install</code>

<ol>
<li>Installs all dependencies fresh</li>
</ol></li>
<li><code>git checkout -b temp</code>

<ol>
<li>Create temp branch</li>
</ol></li>
</ol>

<h3 id="iii-update-changelog-and-docs">III. Update (changelog_) _and docs</h3>

<ol>
<li><code>git log --oneline --decorate --no-merges v$(node -e 'console.log(require(&quot;./lerna.json&quot;).version)')..</code>

<ol>
<li>See the diffs of what was merged between now &amp; the last release</li>
<li>Or look at PR merged list with &ldquo;last-updated&rdquo; sort order: <br />
<a href="https://github.com/patternfly/patternfly-elements/pulls?q=is%3Apr+is%3Aclosed+sort%3Aupdated-desc">https://github.com/patternfly/patternfly-elements/pulls?q=is%3Apr+is%3Aclosed+sort%3Aupdated-desc</a></li>
</ol></li>
<li>Update the file <code>CHANGELOG-prerelease.md</code> and save</li>
<li><span style="text-decoration:underline;">Search</span> for release tag string in /docs/layout directory i.e. &ldquo;prerelease.19&rdquo; and update to release number <br /></li>
</ol>

<p><img src="https://www.patternfly.org/patternfly-elements/version_storybook.png" width="450"/></p>

<ol>
<li><code>git add * &amp;&amp; git commit -m &quot;chore(bump): bump version in docs&quot;</code>

<ol>
<li>Commit changes, don&rsquo;t push</li>
</ol></li>
</ol>

<h3 id="iv-create-release-branch-tag">IV. Create release branch &amp; tag</h3>

<ol>
<li><p><code>npm run release</code></p>

<p>This script will do the following:</p>

<ol>
<li>Create release branch</li>
<li>Create compiled assets and commit them</li>
<li>Uses <a href="https://lerna.js.org">lerna</a> to guess at what the next release will be

<ol>
<li><strong>Choose &ldquo;custom prerelease&rdquo; (for now)</strong></li>
<li>It bumps the version numbers inside the package.json files in the components (currently all components are bumped, will fix)</li>
</ol></li>
<li>Pushes the branch</li>
<li>Pushes independent tags for each component and pushes to NPM</li>
<li>Remove compiled assets</li>
<li>Returns you to the master branch</li>
</ol></li>
</ol>

<h3 id="v-github-updates">V. Github Updates</h3>

<ol>
<li>Create a PR</li>
<li>Get someone to review</li>
<li>Merge the release branch <a href="https://github.com/patternfly/patternfly-elements/pulls">pull request</a> into master.  Note: this must be a regular merge.  <em>Do not squash!</em></li>
<li><strong>Add release notes to the <a href="https://github.com/patternfly/patternfly-elements/releases">tag</a> in Github</strong></li>
</ol>

<h3 id="vi-deploy-storybook-docs-must-do-this-after-pr-is-merged">VI. Deploy storybook &amp; docs (must do this after PR is merged)</h3>

<ol>
<li><code>git checkout master &amp;&amp; git fetch origin &amp;&amp; git pull origin</code>

<ol>
<li>Grab the latest from master, which now has the new release</li>
</ol></li>
<li><code>npm run build</code></li>
<li>Need to test the docs first?

<ol>
<li><code>cd /docs</code></li>
<li><code>hugo server</code></li>
</ol></li>
<li><code>npm run deploy-docs</code>

<ol>
<li>Create compiled assets</li>
<li>Builds &amp; deploys storybook to <a href="https://patternfly.org/patternfly-elements/demo">https://patternfly.org/patternfly-elements/demo</a></li>
<li>Deploys docs to github pages <a href="https://patternfly.github.io/patternfly-elements">https://patternfly.github.io/patternfly-elements</a>

<ol>
<li>(use incognito to check &amp; see if version number is bumped)</li>
</ol></li>
</ol></li>
</ol>

<h3 id="vii-send-patternfly-elements-announce-redhat-com-mailto-patternfly-elements-announce-redhat-com-email">VII. Send <a href="mailto:patternfly-elements-announce@redhat.com">patternfly-elements-announce@redhat.com</a> email</h3>

<pre><code>Greetings! 

There is a new release tag for PatternFly Elements,  [v1.0.0-prerelease.20](https://github.com/patternfly/patternfly-elements/releases/tag/v1.0.0-prerelease.20), which includes



*  You can preview the new components on the [storybook demo page.](https://patternfly.github.io/patternfly-elements/demo/?knob-Theme=light&amp;knob-Count=5&amp;selectedKind=Accordion&amp;selectedStory=pfe-accordion&amp;full=0&amp;addons=1&amp;stories=1&amp;panelRight=1&amp;addonPanel=storybooks%2Fstorybook-addon-knobs)  

… other details

Thanks for your continued support of the project!  #usetheplatform

---

[https://www.redhat.com/mailman/private/patternfly-elements-announce](https://www.redhat.com/mailman/private/patternfly-elements-announce)

</code></pre>

<hr/>

<h2 id="legacy-the-hard-way">(Legacy) The Hard Way</h2>

<p>Before the release script (above) was created, we published releases using the manual steps below.  They&rsquo;re kept here mostly for posterity, and possibly to make the <a href="https://github.com/patternfly/patternfly-elements/blob/master/scripts/release.sh">release script</a> more understandable.</p>

<p>To roll a new release, use the following steps:</p>

<ol>
<li>Start in the root directory of the patternfly-elements project.</li>
<li>Check out the master branch and pull down the latest:

<ul>
<li><code>git reset --hard &amp;&amp; git clean -df &amp;&amp; git checkout master &amp;&amp; git fetch origin &amp;&amp; git pull</code></li>
</ul></li>
<li>To have lerna bump the verions, run: <code>npm run lerna version -- --no-git-tag-version --no-push --preid prerelease</code>.

<ul>
<li>Choose the appropriate version bump type for the release you&rsquo;re publishing:

<ul>
<li>if bumping a prerelease version (example: from 1.0.0-prerelease.2 to 1.0.0-prerelease.3), choose <em>Custom Prerelease</em></li>
</ul></li>
</ul></li>
<li>Assign that version to this variable for use below: <code>$NEW_VERSION=&quot;1.0.0-prerelease.3&quot;</code>.</li>
<li>Create a new branch: <code>git checkout -b release/$NEW_VERSION</code> (example: release/1.0.0-prerelease.3).</li>
<li>Run a fresh install, build all the assets, and then force add those assets for the tag release:

<ul>
<li><code>npm install &amp;&amp; npm run build &amp;&amp; git add elements/*/*.{js,map,css} -f</code></li>
</ul></li>
<li>Commit the updates: <code>git commit -am &quot;$NEW_VERSION&quot;</code></li>
<li>Roll the tag: <code>git tag &quot;v$NEW_VERSION&quot;</code></li>
<li>Remove the bundle files:

<ul>
<li><code>for e in elements/*; do find $e -maxdepth 1 \( -not -name &quot;gulpfile.js&quot; -not -name &quot;rollup.config.js&quot; \) \( -name &quot;*.js&quot; -or -name &quot;*.css&quot; -or -name &quot;*.map&quot; \) -exec git rm -f {} \; ;done</code></li>
</ul></li>
<li>Commit: <code>git commit -am &quot;Remove bundles from $NEW_VERSION&quot;</code></li>
<li>Push up to origin: <code>git push origin release/$NEW_VERSION -u</code></li>
<li>Push up the tag: <code>git push --tags</code></li>
<li>Checkout master and reset:

<ul>
<li><code>git checkout master</code></li>
<li><code>git reset --hard origin/master</code></li>
</ul></li>
<li><a href="https://github.com/patternfly/patternfly-elements/compare">Create a pull request</a> for the branch you just created.</li>
<li>Delete branch after merging pull request:

<ul>
<li><code>git branch -D release/$NEW_VERSION</code></li>
</ul></li>
<li>To publish to npm (you will have to have the right credentials to do this):

<ul>
<li>Checkout the tag release you just rolled: <code>git checkout v$NEW_VERSION</code></li>
<li>From that code, run the lerna publishing task: <code>npm run lerna publish from-git</code></li>
</ul></li>
</ol>


    </ul>

  </section>

  <aside class="page-toc">
    <h3>Page Contents</h3>
    

<div class="js-toc">
  
</div>

<script type="text/javascript">
document.addEventListener("DOMContentLoaded",
function(){
tocbot.init({

tocSelector: '.js-toc',

contentSelector: '#posts',

headingSelector: 'h2'
})
}
);
</script>


  </aside>
</article>

</main>
  <footer>
  

<nav>
  <ul>
    <li><span>PatternFly Elements Documentation</span></li>
    <li>
      <a href="https://www.patternfly.org/patternfly-elements/getting-started">Getting Started</a>
    </li>
    <li>
      <a href="https://www.patternfly.org/patternfly-elements/develop">Develop</a>
    </li>
      <li>
      <a href="https://www.patternfly.org/patternfly-elements/theme">Theme</a>
    </li>
    <li>
      <a href="https://www.patternfly.org/patternfly-elements/community">Community</a>
    </li>
  </ul>
</nav>
<small>&copy; Licence MIT.</small>
</footer>


  <script src="https://www.patternfly.org/patternfly-elements/js/kube.min.js" type="text/javascript">
  </script>
  
</body>

</html>
