<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <script src="/components/@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>
    <script src="/components/web-component-tester/browser.js"></script>
    <script type="module" src="../../pfe-band/dist/pfe-band.js"></script>
    <script type="module" src="../dist/pfe-content-set.js"></script>
  </head>
  <body>
    <div style="width: 1024px;">
      <pfe-content-set id="default">
        <h2 pfe-content-set--header>heading 1</h2>
        <p pfe-content-set--panel>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
        <h2 pfe-content-set--header>heading 2</h2>
        <p pfe-content-set--panel>Consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus.</p>
        <h2 pfe-content-set--header>heading 3</h2>
        <p pfe-content-set--panel>At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, At accusam aliquyam diam diam dolore dolores duo eirmod eos erat, et nonumy sed tempor et et invidunt justo labore Stet clita ea et gubergren, kasd magna no rebum. sanctus sea sed takimata ut vero voluptua. est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat.</p>
      </pfe-content-set>
    </div>

    <div style="width: 600px;">
      <pfe-content-set pfe-variant="wind" id="wind">
          <h2 pfe-content-set--header>heading 1</h2>
          <p pfe-content-set--panel>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
          <h2 pfe-content-set--header>heading 2</h2>
          <p pfe-content-set--panel>Consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus.</p>
          <h2 pfe-content-set--header>heading 3</h2>
          <p pfe-content-set--panel>At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, At accusam aliquyam diam diam dolore dolores duo eirmod eos erat, et nonumy sed tempor et et invidunt justo labore Stet clita ea et gubergren, kasd magna no rebum. sanctus sea sed takimata ut vero voluptua. est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat.</p>
      </pfe-content-set>
    </div>

    <div style="width: 1024px;">
      <pfe-content-set pfe-variant="earth" id="earth">
          <h2 pfe-content-set--header>heading 1</h2>
          <p pfe-content-set--panel>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
          <h2 pfe-content-set--header>heading 2</h2>
          <p pfe-content-set--panel>Consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus.</p>
          <h2 pfe-content-set--header>heading 3</h2>
          <p pfe-content-set--panel>At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, At accusam aliquyam diam diam dolore dolores duo eirmod eos erat, et nonumy sed tempor et et invidunt justo labore Stet clita ea et gubergren, kasd magna no rebum. sanctus sea sed takimata ut vero voluptua. est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat.</p>
          <h2 pfe-content-set--header>heading 4</h2>
          <p pfe-content-set--panel>Nullam id dolor id nibh ultricies vehicula ut id elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.</p>
          <h2 pfe-content-set--header>heading 5</h2>
          <p pfe-content-set--panel>Aenean lacinia bibendum nulla sed consectetur. Nullam id dolor id nibh ultricies vehicula ut id elit. Vestibulum id ligula porta felis euismod semper. Sed posuere consectetur est at lobortis. Donec ullamcorper nulla non metus auctor fringilla.</p>
      </pfe-content-set>
    </div>

    <div style="width: 1024px;">
      <pfe-content-set vertical pfe-variant="earth" id="earth-vertical">
          <h2 pfe-content-set--header>heading 1</h2>
          <p pfe-content-set--panel>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
          <h2 pfe-content-set--header>heading 2</h2>
          <p pfe-content-set--panel>Consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus.</p>
          <h2 pfe-content-set--header>heading 3</h2>
          <p pfe-content-set--panel>At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, At accusam aliquyam diam diam dolore dolores duo eirmod eos erat, et nonumy sed tempor et et invidunt justo labore Stet clita ea et gubergren, kasd magna no rebum. sanctus sea sed takimata ut vero voluptua. est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat.</p>
      </pfe-content-set>
    </div>

    <div style="width: 1024px;">
      <pfe-content-set id="dynamicTabs">
        <h2 pfe-content-set--header>Heading 1</h2>
        <p pfe-content-set--panel>Panel 1</p>
      </pfe-content-set>
    </div>

    <div style="width: 600px">
      <pfe-content-set id="dynamicAccordion">
        <h2 pfe-content-set--header>Heading 1</h2>
        <p pfe-content-set--panel>Panel 1</p>
      </pfe-content-set>
    </div>

    <pfe-content-set id="align" pfe-align="center">
      <h2 pfe-content-set--header>Heading 1</h2>
      <p pfe-content-set--panel>Panel 1</p>
    </pfe-content-set>


    <div style="width: 500px">
      <pfe-content-set id="accordionBreakpoint" pfe-breakpoint="550">
        <h2 pfe-content-set--header>Heading 1</h2>
        <p pfe-content-set--panel>Panel 1</p>
      </pfe-content-set>
    </div>


    <div style="width: 600px">
      <pfe-content-set id="tabsBreakpoint" pfe-breakpoint="550">
        <h2 pfe-content-set--header>Heading 1</h2>
        <p pfe-content-set--panel>Panel 1</p>
      </pfe-content-set>
    </div>

    <pfe-band id="band" pfe-color="darkest">
      <pfe-content-set>
        <h2 pfe-content-set--header>Heading 1</h2>
        <p pfe-content-set--panel>Panel 1</p>
      </pfe-content-set>
    </pfe-band>

    <pfe-band id="accordionBand" pfe-color="darkest" style="width: 600px;">
      <pfe-content-set>
        <h2 pfe-content-set--header>Heading 1</h2>
        <p pfe-content-set--panel>Panel 1</p>
      </pfe-content-set>
    </pfe-band>

    <script>
      suite('<pfe-content-set>', () => {
        test('it should have the proper attributes for tabs', () => {
          const pfeContentSet = document.querySelector("#default");
          const pfeTabs = pfeContentSet.querySelector("pfe-tabs");
          const firstHeader = pfeTabs.querySelector("pfe-tab:nth-child(1)");
          const thirdHeader = pfeTabs.querySelector("pfe-tab:nth-child(5)");
          const panel = pfeTabs.querySelector("pfe-tab-panel");

          assert.isTrue(panel.hasAttribute("aria-labelledby"));
          assert.isTrue(firstHeader.hasAttribute("aria-controls"));
          assert.isTrue(firstHeader.hasAttribute('aria-controls'));
          assert.equal(firstHeader.getAttribute('tabindex'), '0');
          assert.equal(firstHeader.getAttribute('aria-selected'), 'true');
          assert.isTrue(thirdHeader.hasAttribute('aria-controls'));
          assert.equal(thirdHeader.getAttribute('tabindex'), '-1');
          assert.equal(thirdHeader.getAttribute('aria-selected'), 'false');
        });

        test('it should be a light accordion', () => {
          const pfeAccordion = document.querySelector('#wind').querySelector("pfe-accordion");
          const firstHeader = pfeAccordion.querySelector('pfe-accordion-header:nth-child(1)');
          const thirdHeader = pfeAccordion.querySelector('pfe-accordion-header:nth-child(5)');
          const firstPanel = document.querySelector('#wind').querySelector("pfe-accordion-panel:nth-child(2)");
          const secondPanel = pfeAccordion.querySelector('pfe-accordion-panel:nth-child(4)');

          assert.isTrue(firstHeader.hasAttribute('aria-controls'));
          assert.isTrue(thirdHeader.hasAttribute('aria-controls'));
          assert.isTrue(firstPanel.hasAttribute('aria-labelledby'));
          assert.isTrue(secondPanel.hasAttribute('aria-labelledby'));
        });

        test('it should have dark tabs', () => {
          const pfeTabs = document.querySelector('#earth').querySelector("pfe-tabs");
          const firstHeader = pfeTabs.querySelector('pfe-tab:nth-child(1)');
          const secondHeader = pfeTabs.querySelector('pfe-tab:nth-child(3)');
          const fifthHeader = pfeTabs.querySelector('pfe-tab:nth-child(9)');

          assert.equal(pfeTabs.getAttribute('pfe-variant'), 'earth');
          assert.equal(firstHeader.getAttribute('tabindex'), '0');
          assert.equal(firstHeader.getAttribute('aria-selected'), 'true');
          assert.equal(secondHeader.getAttribute('aria-selected'), 'false');
          assert.isTrue(fifthHeader.hasAttribute('aria-controls'));
          assert.equal(fifthHeader.getAttribute('tabindex'), '-1');
        });

        test('it should have vertical tabs', () => {
          const pfeTabs = document.querySelector('#earth-vertical').querySelector("pfe-tabs");
          const firstHeader = pfeTabs.querySelector('pfe-tab:nth-child(1)');
          const secondHeader = pfeTabs.querySelector('pfe-tab:nth-child(3)');
          assert.isTrue(pfeTabs.hasAttribute('vertical'));
          assert.equal(pfeTabs.getAttribute('pfe-variant'), 'earth');
          assert.equal(firstHeader.getAttribute('tabindex'), '0');
          assert.equal(firstHeader.getAttribute('aria-selected'), 'true');
          assert.equal(secondHeader.getAttribute('aria-selected'), 'false');
        });

        test("it should properly initialize any dynamically added headers and panels", done => {
          const pfeContentSetTabs = document.querySelector("#dynamicTabs");
          const pfeContentSetAccordion = document.querySelector("#dynamicAccordion");
          const documentFragment = document.createDocumentFragment();

          var newHeader = document.createElement("h2");
          newHeader.setAttribute("pfe-content-set--header", true);
          newHeader.setAttribute("pfe-id", "newHeader");
          newHeader.textContent = "New Heading";

          var newPanel = document.createElement("div");
          newPanel.setAttribute("pfe-content-set--panel", true);
          newPanel.setAttribute("pfe-id", "newPanel");
          newPanel.textContent = "New Panel";

          documentFragment.appendChild(newHeader);
          documentFragment.appendChild(newPanel);

          const tabsDocumentFragment = documentFragment.cloneNode(true);
          const accordionDocumentFragment = documentFragment.cloneNode(true);

          pfeContentSetTabs.appendChild(tabsDocumentFragment);
          pfeContentSetAccordion.appendChild(accordionDocumentFragment);

          flush(() => {
            const pfeTabs = pfeContentSetTabs.querySelector("pfe-tabs");
            const pfeAccordion = pfeContentSetAccordion.querySelector("pfe-accordion");

            assert.isNotNull(pfeTabs.querySelector('[pfe-id="newHeader"]'));
            assert.isNotNull(pfeTabs.querySelector('[pfe-id="newPanel"]'));
            assert.isNotNull(pfeAccordion.querySelector('[pfe-id="newHeader"]'));
            assert.isNotNull(pfeAccordion.querySelector('[pfe-id="newPanel"]'));

            done();
          });
        });

        test("it should set pfe-tab-align on the tabs if the pfe-align attribute is present on pfe-content-set", () => {
          const pfeContentSet = document.querySelector("#align");
          const pfeTabs = pfeContentSet.querySelector("pfe-tabs");
          const alignValue = pfeContentSet.getAttribute("pfe-align");
          const pfeTabAlignValue = pfeTabs.getAttribute("pfe-tab-align");

          assert.equal(alignValue, pfeTabAlignValue);
        });

        test("it should put content into an accordion if the pfe-breakpoint attribute is present and greater than the width of pfe-content-set parent", () => {
          const pfeContentSet = document.querySelector("#accordionBreakpoint");
          const pfeAccordion = pfeContentSet.querySelector("pfe-accordion");

          assert.isTrue(pfeContentSet.hasAttribute("pfe-breakpoint"));
          assert.isNotNull(pfeAccordion);
        });

        test("it should put content into tabs if the pfe-breakpoint attribute is present and less than the width of pfe-content-set parent", () => {
          const pfeContentSet = document.querySelector("#tabsBreakpoint");
          const pfeTabs = pfeContentSet.querySelector("pfe-tabs");

          assert.isTrue(pfeContentSet.hasAttribute("pfe-breakpoint"));
          assert.isNotNull(pfeTabs);

        });
      
        test("it should set the correct \"on\" attribute from a parent component that has a pfe-color attribute", done => {
          const band = document.querySelector("#band");
          const contentSet = band.querySelector("pfe-content-set");
          const tabs = contentSet.querySelector("pfe-tabs");
          const tab = tabs.querySelector("pfe-tab");
          const panel = tabs.querySelector("pfe-tab-panel");

          assert.equal(contentSet.getAttribute("on"), "dark");
          assert.equal(tabs.getAttribute("on"), "dark")
          assert.equal(tab.getAttribute("on"), "dark");
          assert.equal(panel.getAttribute("on"), "dark");

          const accordionBand = document.querySelector("#accordionBand");
          const accordionContentSet = accordionBand.querySelector("pfe-content-set");
          const accordion = accordionContentSet.querySelector("pfe-accordion");
          const accordionHeader = accordion.querySelector("pfe-accordion-header");
          const accordionPanel = accordion.querySelector("pfe-accordion-panel");

          assert.equal(accordionContentSet.getAttribute("on"), "dark");
          assert.equal(accordion.getAttribute("on"), "dark");
          assert.equal(accordionHeader.getAttribute("on"), "dark");
          assert.equal(accordionPanel.getAttribute("on"), "dark");

          band.removeAttribute("pfe-color");
          accordionBand.removeAttribute("pfe-color");

          flush(() => {
            assert.equal(contentSet.getAttribute("on"), "light");
            assert.equal(tabs.getAttribute("on"), "light")
            assert.equal(tab.getAttribute("on"), "light");
            assert.equal(panel.getAttribute("on"), "light");

            assert.equal(accordionContentSet.getAttribute("on"), "light");
            assert.equal(accordion.getAttribute("on"), "light");
            assert.equal(accordionHeader.getAttribute("on"), "light");
            assert.equal(accordionPanel.getAttribute("on"), "light");

            done();
          });
        });
      });
    </script>
  </body>
</html>
